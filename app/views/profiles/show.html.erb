<div class="max-w-2xl mx-auto">
  <div class="md:flex md:items-center md:justify-between mb-8">
    <div class="min-w-0 flex-1">
      <h2 class="text-2xl font-bold leading-7 text-white sm:truncate sm:text-3xl sm:tracking-tight">Profile Settings</h2>
      <p class="mt-1 text-sm text-slate-400">Manage your account information and security.</p>
    </div>
  </div>

  <div class="bg-slate-800 shadow rounded-lg border border-slate-700">
    <div class="px-4 py-5 sm:p-6">
      <h3 class="text-lg font-medium leading-6 text-white border-b border-slate-700 pb-4 mb-6">General Information</h3>
      
      <%= form_with model: Current.user, url: profile_path, class: "space-y-6" do |form| %>
        <% if form.object.errors.any? %>
          <div class="rounded-md bg-rose-900/50 p-4 border border-rose-800">
             <div class="flex">
               <div class="ml-3">
                 <h3 class="text-sm font-medium text-rose-200"><%= size = form.object.errors.count %> error<%= 's' unless size == 1 %> prohibited this profile from being saved:</h3>
                 <div class="mt-2 text-sm text-rose-300">
                   <ul role="list" class="list-disc pl-5 space-y-1">
                     <% form.object.errors.full_messages.each do |message| %>
                       <li><%= message %></li>
                     <% end %>
                   </ul>
                 </div>
               </div>
             </div>
           </div>
        <% end %>

        <div class="mb-6">
          <label class="block text-sm font-medium text-slate-300 mb-2">Profile Picture</label>
          <div class="flex items-center gap-4">
            <div class="relative h-16 w-16 group">
                <div class="h-16 w-16 rounded-full bg-slate-700 flex items-center justify-center text-xl font-bold text-white shadow-inner absolute inset-0 z-0">
                    <%= Current.user.full_name.to_s.first&.upcase || "?" %>
                </div>
                <% if Current.user.avatar_attached? %>
                    <img src="data:<%= Current.user.avatar_content_type %>;base64,<%= Base64.strict_encode64(Current.user.avatar_data) %>" class="h-16 w-16 rounded-full object-cover ring-2 ring-indigo-500/50 shadow-lg absolute inset-0 z-10 transition-opacity duration-300" onerror="this.style.opacity='0'">
                <% end %>
            </div>
            <%= form.file_field :avatar, class: "block w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-600 file:text-white hover:file:bg-indigo-700 cursor-pointer" %>
          </div>
        </div>

        <div>
          <%= form.label :full_name, class: "block text-sm font-medium text-slate-300" %>
          <div class="mt-1">
            <%= form.text_field :full_name, class: "block w-full rounded-md border-0 bg-slate-700 py-1.5 text-white shadow-sm ring-1 ring-inset ring-slate-600 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" %>
          </div>
        </div>

        <div>
          <%= form.label :email_address, class: "block text-sm font-medium text-slate-300" %>
          <div class="mt-1">
            <%= form.email_field :email_address, class: "block w-full rounded-md border-0 bg-slate-700 py-1.5 text-white shadow-sm ring-1 ring-inset ring-slate-600 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" %>
          </div>
        </div>

        <div>
          <%= form.label :password, "New Password (leave blank to keep current)", class: "block text-sm font-medium text-slate-300" %>
          <div class="mt-1">
            <%= form.password_field :password, class: "block w-full rounded-md border-0 bg-slate-700 py-1.5 text-white shadow-sm ring-1 ring-inset ring-slate-600 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" %>
          </div>
        </div>

        <div>
          <%= form.label :password_confirmation, "Confirm New Password", class: "block text-sm font-medium text-slate-300" %>
          <div class="mt-1">
            <%= form.password_field :password_confirmation, class: "block w-full rounded-md border-0 bg-slate-700 py-1.5 text-white shadow-sm ring-1 ring-inset ring-slate-600 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" %>
          </div>
        </div>

        <div class="pt-5 flex justify-end">
          <%= form.submit "Update Profile", class: "ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
