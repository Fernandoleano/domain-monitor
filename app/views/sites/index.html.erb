<div class="space-y-8">
  <!-- Commander Header -->
  <div class="md:flex md:items-center md:justify-between mb-8">
    <div class="min-w-0 flex-1">
      <h2 class="text-2xl font-bold leading-7 text-white sm:truncate sm:text-3xl sm:tracking-tight"><%= Current.user.first_name %>'s Dashboard</h2>
      <p class="mt-2 text-sm text-slate-400">Real-time system telemetry and domain status.</p>
    </div>
    <div class="mt-4 flex md:ml-4 md:mt-0">
      <%= link_to "Add Site", new_site_path, class: "inline-flex items-center justify-center rounded-lg border border-transparent bg-indigo-600 px-6 py-3 text-sm font-bold text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-slate-900 transition-colors" %>
    </div>
  </div>

  <!-- Metrics Grid -->
  <dl class="grid grid-cols-1 gap-5 sm:grid-cols-3">
    <div class="px-6 py-5 bg-slate-800 rounded-lg border border-slate-700 shadow-sm overflow-hidden sm:p-6">
      <dt class="text-sm font-medium text-slate-400">Total Monitored Sites</dt>
      <dd class="mt-1 text-3xl font-semibold text-white tracking-tight"><%= @total_sites %></dd>
    </div>
    <div class="px-6 py-5 bg-slate-800 rounded-lg border border-slate-700 shadow-sm overflow-hidden sm:p-6">
      <dt class="text-sm font-medium text-slate-400">Global Uptime</dt>
      <dd class="mt-1 text-3xl font-semibold <%= @global_uptime > 99 ? 'text-emerald-400' : 'text-amber-400' %> tracking-tight"><%= @global_uptime %>%</dd>
    </div>
    <div class="px-6 py-5 bg-slate-800 rounded-lg border border-slate-700 shadow-sm overflow-hidden sm:p-6">
      <dt class="text-sm font-medium text-slate-400">Avg Latency (24h)</dt>
      <dd class="mt-1 text-3xl font-semibold text-cyan-400 tracking-tight"><%= @avg_latency %> <span class="text-lg text-slate-500">ms</span></dd>
    </div>
  </dl>

  <!-- Main Chart -->
  <div class="bg-slate-800 rounded-lg border border-slate-700 shadow-sm p-6">
    <h3 class="text-lg leading-6 font-medium text-white mb-4">Response Time Trends (All Sites)</h3>
    <div class="h-64 chart-container text-slate-200">
       <%= line_chart Check.where(site: @sites).where("created_at > ?", 24.hours.ago).group_by_hour(:created_at).average(:response_time_ms), colors: ["#22d3ee"], points: true, height: "250px", library: { scales: { x: { grid: { color: 'rgba(255, 255, 255, 0.1)' } }, y: { grid: { color: 'rgba(255, 255, 255, 0.1)' } } } } %>
    </div>
  </div>

  <!-- Turbo Stream for Real-time Updates -->
  <%= turbo_stream_from Current.user, "sites" %>

  <!-- Sites Grid -->
  <div id="sites" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
    <%= render @sites %>

    
    <% if @sites.empty? %>
        <!-- Empty state (omitted for brevity, assume similar style) -->
    <% end %>
  </div>
</div>
